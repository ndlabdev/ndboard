enum BoardVisibility {
    PRIVATE
    PUBLIC
    LINK
}

enum MemberRole {
    OWNER
    ADMIN
    MEMBER
    OBSERVER
    GUEST
}

model Board {
    id          String          @id @default(cuid(2))
    name        String
    description String?
    ownerId     String
    visibility  BoardVisibility @default(PRIVATE)
    archivedAt  DateTime?
    deletedAt   DateTime?
    createdAt   DateTime        @default(now())
    updatedAt   DateTime        @updatedAt

    owner        User          @relation("BoardOwner", fields: [ownerId], references: [id])
    lists        List[]
    members      BoardMember[]
    labels       Label[]
    customFields CustomField[]
    activities   Activity[]
    card         Card[]

    @@unique([name, ownerId, archivedAt])
    @@index([ownerId])
}

model BoardMember {
    id       String     @id @default(cuid(2))
    boardId  String
    userId   String
    role     MemberRole @default(MEMBER)
    status   String?
    joinedAt DateTime   @default(now())
    board    Board      @relation(fields: [boardId], references: [id])
    user     User       @relation(fields: [userId], references: [id])

    @@unique([boardId, userId])
    @@index([userId])
}
